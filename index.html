<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <!-- Favicon - prioritize larger sizes for better visibility -->
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/favicon-32x32.png?v=2"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/favicon-16x16.png?v=2"
    />
    <link rel="icon" type="image/x-icon" href="/favicon.ico?v=2" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg?v=2" />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/apple-touch-icon.png?v=2"
    />
    <!-- Additional meta tags for better favicon support -->
    <meta name="msapplication-TileImage" content="/favicon-32x32.png" />
    <meta name="theme-color" content="#ffffff" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Default meta tags (will be overridden by react-helmet-async for specific pages) -->
    <meta
      name="description"
      content="Create, discover, and share delicious recipes with Recipe Generator. AI-powered recipe creation, ingredient matching, and a community of food lovers."
    />
    <meta
      name="keywords"
      content="recipes, cooking, food, recipe generator, meal planning, ingredients, cooking time, recipe sharing"
    />
    <meta name="author" content="Recipe Generator" />

    <!-- Open Graph meta tags for social sharing -->
    <meta property="og:site_name" content="Recipe Generator" />
    <meta property="og:type" content="website" />
    <meta
      property="og:title"
      content="Recipe Generator - Create, Discover & Share Delicious Recipes"
    />
    <meta
      property="og:description"
      content="Create, discover, and share delicious recipes with Recipe Generator. AI-powered recipe creation, ingredient matching, and a community of food lovers."
    />
    <meta
      property="og:image"
      content="https://recipegenerator.app/recipe-generator-logo.png"
    />
    <meta property="og:image:alt" content="Recipe Generator Logo" />
    <meta property="og:image:width" content="512" />
    <meta property="og:image:height" content="512" />
    <meta property="og:url" content="https://recipegenerator.app" />
    <meta property="og:locale" content="en_US" />

    <!-- Twitter Card meta tags -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@RecipeGenerator" />
    <meta
      name="twitter:title"
      content="Recipe Generator - Create, Discover & Share Delicious Recipes"
    />
    <meta
      name="twitter:description"
      content="Create, discover, and share delicious recipes with Recipe Generator. AI-powered recipe creation, ingredient matching, and a community of food lovers."
    />
    <meta
      name="twitter:image"
      content="https://recipegenerator.app/recipe-generator-logo.png"
    />
    <meta name="twitter:image:alt" content="Recipe Generator Logo" />

    <link href="/output.css" rel="stylesheet" />
    <title>Recipe Generator</title>
    <!-- ChatKit script for Agent Builder workflows -->
    <script
      src="https://cdn.platform.openai.com/deployments/chatkit/chatkit.js"
      async
    ></script>
    <!-- Set theme immediately before React loads to prevent flash -->
    <script>
      // Set default theme immediately to prevent flash of unstyled content
      // IMPORTANT: For tenant subdomains, let TenantProvider handle theme from database
      (function () {
        // Detect if we're on a tenant subdomain
        const hostname = window.location.hostname;
        const parts = hostname.split('.');
        let isTenantSubdomain = false;

        // Local development: drsmith.localhost
        if (hostname.includes('localhost')) {
          isTenantSubdomain = parts.length > 1 && parts[0] !== 'localhost';
        } else {
          // Production: drsmith.recipegenerator.app
          if (parts.length >= 3) {
            const subdomain = parts[0];
            isTenantSubdomain = subdomain !== 'www' && subdomain !== 'app';
          }
        }

        // Only set theme for main app (not tenant subdomains)
        // Tenant themes are handled by TenantProvider from database
        if (!isTenantSubdomain) {
          const storedTheme = localStorage.getItem('theme');
          const defaultTheme = 'caramellatte';
          const theme = storedTheme || defaultTheme;
          document.documentElement.setAttribute('data-theme', theme);
        }
        // For tenant subdomains, TenantProvider will set the theme from database
      })();
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    <!-- Theme is applied by TenantProvider component, but set early above to prevent flash -->
  </body>
</html>
