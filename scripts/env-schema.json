{
  "name": "Recipe Generator Environment Schema",
  "version": "1.0.0",
  "description": "Canonical schema for environment variables across all environments",
  "environments": {
    "development": {
      "required": {
        "client": [
          "VITE_SUPABASE_URL",
          "VITE_SUPABASE_ANON_KEY",
          "VITE_OPENAI_MODEL"
        ],
        "server": ["OPENAI_API_KEY"]
      },
      "optional": {
        "client": [],
        "server": []
      }
    },
    "production": {
      "required": {
        "client": [
          "VITE_SUPABASE_URL",
          "VITE_SUPABASE_ANON_KEY",
          "VITE_OPENAI_MODEL"
        ],
        "server": ["OPENAI_API_KEY"]
      },
      "optional": {
        "client": [],
        "server": []
      }
    }
  },
  "validation": {
    "VITE_SUPABASE_URL": {
      "pattern": "^https://[a-z0-9]+\\.supabase\\.co$",
      "description": "Supabase project URL"
    },
    "VITE_SUPABASE_ANON_KEY": {
      "pattern": "^eyJ[A-Za-z0-9+/=.-]+$",
      "description": "Supabase anonymous key (JWT format)"
    },
    "VITE_OPENAI_MODEL": {
      "pattern": "^(gpt-4|gpt-3\\.5-turbo|gpt-4o|gpt-4o-mini|gpt-4-turbo)$",
      "description": "OpenAI model identifier"
    },
    "OPENAI_API_KEY": {
      "pattern": "^sk-[A-Za-z0-9_-]{20,}$",
      "description": "OpenAI API key"
    }
  },
  "security": {
    "neverExposeToClient": [
      "OPENAI_API_KEY",
      "SENTRY_AUTH_TOKEN",
      "SUPABASE_SERVICE_ROLE_KEY",
      "SUPABASE_JWT_SECRET",
      "POSTGRES_PASSWORD",
      "POSTGRES_URL",
      "POSTGRES_URL_NON_POOLING"
    ],
    "safeForClient": [
      "VITE_SUPABASE_URL",
      "VITE_SUPABASE_ANON_KEY",
      "VITE_OPENAI_MODEL"
    ],
    "vercelInternal": [
      "VERCEL",
      "VERCEL_URL",
      "VERCEL_ENV",
      "VERCEL_GIT_COMMIT_SHA",
      "VERCEL_GIT_COMMIT_REF",
      "VERCEL_GIT_REPO_OWNER",
      "VERCEL_GIT_REPO_SLUG"
    ],
    "supabaseInternal": [
      "SUPABASE_URL",
      "SUPABASE_ANON_KEY",
      "SUPABASE_SERVICE_ROLE_KEY",
      "SUPABASE_JWT_SECRET",
      "POSTGRES_DATABASE",
      "POSTGRES_HOST",
      "POSTGRES_PASSWORD",
      "POSTGRES_PRISMA_URL",
      "POSTGRES_URL",
      "POSTGRES_URL_NON_POOLING",
      "POSTGRES_USER"
    ],
    "nextjsInternal": [
      "NEXT_PUBLIC_SUPABASE_ANON_KEY",
      "NEXT_PUBLIC_SUPABASE_URL"
    ],
    "buildTools": [
      "NX_DAEMON",
      "TURBO_CACHE",
      "TURBO_DOWNLOAD_LOCAL_ENABLED",
      "TURBO_REMOTE_ONLY",
      "TURBO_RUN_SUMMARY"
    ],
    "vercelBuild": [
      "VERCEL_GIT_COMMIT_AUTHOR_LOGIN",
      "VERCEL_GIT_COMMIT_AUTHOR_NAME",
      "VERCEL_GIT_COMMIT_MESSAGE",
      "VERCEL_GIT_PREVIOUS_SHA",
      "VERCEL_GIT_PROVIDER",
      "VERCEL_GIT_PULL_REQUEST_ID",
      "VERCEL_GIT_REPO_ID",
      "VERCEL_OIDC_TOKEN",
      "VERCEL_TARGET_ENV"
    ]
  }
}
